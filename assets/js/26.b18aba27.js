(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{351:function(t,a,s){"use strict";s.r(a);var e=s(7),n=Object(e.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p",[t._v("朋友遇到了XXL-JOB的一个问题：")]),t._v(" "),a("div",{staticClass:"language-markdown extra-class"},[a("pre",{pre:!0,attrs:{class:"language-markdown"}},[a("code",[t._v("xxl-job registry fail, registryParam:RegistryParam{registryGroup= EXECUTOR , registryKey= xxl-job-executor-sample , registryValue= http://10.16.245.130:9999/ }, registryResult:ReturnT [code=500, msg=The accessToken is wrong.]\n")])])]),a("p",[t._v("意思就是执行器注册失败了，报错信息是 token错了。")]),t._v(" "),a("p",[t._v("解决：")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("检查版本。")]),t._v(" "),a("p",[t._v("我们都知道使用 xxl-job 的时候需要在配置文件中配置一下")]),t._v(" "),a("div",{staticClass:"language-properties extra-class"},[a("pre",{pre:!0,attrs:{class:"language-properties"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("xxl.job.accessToken")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("default_token")]),t._v("\n")])])]),a("p",[t._v("但是 2.4.0 跟 2.2.0 用的是不一样的。")]),t._v(" "),a("p",[t._v("2.2.0版本的 xxl-job 解析时读的是：")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("$"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("xxl"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("job"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("admin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("accessToken"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("所以你看看自己的版本，如果是2.2.0 就要多加一个 admin")])]),t._v(" "),a("li",[a("p",[t._v("检查配置")]),t._v(" "),a("p",[t._v("自己配置的配置类有可能出错，就是那个叫 XxlJobConfig 的类，看看到底有没有指定 accessToken")]),t._v(" "),a("p",[t._v("同样别忘了其他配置，尽量在源码里面抄。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://typorehwf.oss-cn-chengdu.aliyuncs.com/image-20231108205824343.png",alt:"image-20231108205824343"}})])])]),t._v(" "),a("p",[t._v("原因：第一个就不说了，连配置都出错了肯定连不上。说一下第二个的原因。")]),t._v(" "),a("p",[t._v("我们引入的 xxl-job-core 依赖中有一个类：AdminBizClient ，这个是执行器给调度中心发消息，也就是发HTTP请求的类，是HTTP请求就有可能带token，那么token从哪里来？对，从 XxlJobSpringExecutor 中由你来配置，但是！你没有配置，那么发过去的请求就没有token！所以就没法注册喽~")])])}),[],!1,null,null,null);a.default=n.exports}}]);